function kui_mouseover_(t){$(t).hasClass("kui_td_kong")||$(t).addClass("td_hover")}function kui_mouseout_(t){$(t).removeClass("td_hover")}function kui_click_(t,i,e,_,o){var s=t.className;if(s.indexOf("kui_td_hui")<0){var n;n=_<10?"0"+parseInt(_,10):_,o=null==$(t).html()?i.substring(8,10):$(t).html()<10?0+$(t).html():$(t).html(),jqObj[0].val(e+"-"+n+"-"+o),$("#kui_d_pane").hide()}}var jqObj=[];$.fn.kuiDate=function(t){function i(){function i(i){jqObj.pop(),jqObj.push(e);var _=r,o=c;"right"==i?(12==o?(_++,o="01"):(o++,o<10&&(o="0"+o)),$(".kui_tomorrow").text(_+"年"+o+"月")):o=o<10?"0"+parseInt(o,10):o;var s=p,n="";""==l?n=_+"-"+o+"-"+s:(n=$.trim(l),n=n.split(" ")[0]);var a=new Array(31,28,31,30,31,30,31,31,30,31,30,31);(_%4==0&&_%100!=0||_%400==0)&&(a[1]=29);for(var f=a[o-1],h=1,g=0;g<o-1;g++)h+=a[g];var v,m=(_-1)%4==0?(_-1)/4:(_-1-(_-1)%4)/4,b=(_-1)%100==0?(_-1)/100:(_-1-(_-1)%100)/100,x=(_-1)%400==0?(_-1)/400:(_-1-(_-1)%400)/400,j=_-1+m-b+x+h,y=j%7,D=(y+f)%7==0?(y+f)/7:(y+f-(y+f)%7)/7+1;v="left"==i?$("#kui_left_t"):$("#kui_right_t"),v.html("");for(var w=[],g=0;g<D;g++){var q=d<10?"0"+d:d,I=k<10?"0"+k:k,O=u+"-"+q+"-"+I;if(0==g){for(var C=1;C<y+1;C++)w.push('<dt class="kui_td_kong">&nbsp;</dt>');for(var H=1,C=y+1;C<=7;C++){var N=7*g+H<10?"0"+(7*g+H):7*g+H,M=o<10?"0"+parseInt(o,10):o,P=_+"-"+M+"-"+N,A="";P>=O?""==l?(A="kui_not_kong",s==N&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":"1"==t.isDisabled?""==l?(A="kui_not_kong",s==N&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":A="kui_td_hui",w.push('<dt class="'+A+'" onmouseover="kui_mouseover_(this)" onmouseout="kui_mouseout_(this)" onclick="kui_click_(this,'+n+","+_+","+o+","+s+');">'+(7*g+H)+"</dt>"),H++}$(".kui_top_tr").removeClass("kui_top_tr")}else if(g==D-1)for(var H=8-y,C=1;C<=7;C++){var P=_+"-"+o+"-"+(7*(g-1)+H),A="";7*(g-1)+H>f?w.push('<dt class="kui_td_kong">&nbsp;</dt>'):(P>=O?""==l?(A="kui_not_kong",s==7*(g-1)+H&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":"1"==t.isDisabled?""==l?(A="kui_not_kong",s==7*(g-1)+H&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":A="kui_td_hui",w.push('<dt class="'+A+'" onmouseover="kui_mouseover_(this)" onmouseout="kui_mouseout_(this)" onclick="kui_click_(this,'+n+","+_+","+o+","+s+');">'+(7*(g-1)+H)+"</dt>")),H++}else for(var H=8-y,C=1;C<=7;C++){var N=7*(g-1)+H<10?"0"+(7*(g-1)+H):7*(g-1)+H,M=o<10?"0"+parseInt(o,10):o,P=_+"-"+M+"-"+N,A="";P>=O?""==l?(A="kui_not_kong",s==N&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":"1"==t.isDisabled?""==l?(A="kui_not_kong",s==N&&"left"==i&&(A="kui_not_kong td_select")):A=l==P?"kui_not_kong td_select":"kui_not_kong":A="kui_td_hui",w.push('<dt class="'+A+'" onmouseover="kui_mouseover_(this)" onmouseout="kui_mouseout_(this)" onclick="kui_click_(this,'+n+","+_+","+o+","+s+',1);">'+(7*(g-1)+H)+"</dt>"),H++}}v.html(w.join(""))}var _=e.offset().left,o=e.offset().top+e.outerHeight(),s=e.outerWidth(),n=$(window).width();_+370<n?$(document).clientHeight-o<217&&$(document).clientHeight>217?$("#kui_d_pane").attr("style","left:"+_+"px; top:"+(e.offset().top-197)+"px;"):$("#kui_d_pane").attr("style","left:"+_+"px; top:"+o+"px;"):$("#kui_d_pane").attr("style","left:"+(_+s-370)+"px; top:"+o+"px;"),$("#kui_d_pane").show();var a=new Date,u=a.getFullYear(),d=a.getMonth()+1,k=a.getDate(),l=(a.getDay(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getTime(),e.val()),r=""==$.trim(l)?u:$.trim(l).substring(0,4),c=""==$.trim(l)?d:$.trim(l).substring(5,7),p=""==$.trim(l)?k:$.trim(l).substring(8,10);$(".kui_today").text(r+"年"+c+"月"),$("a.kui_prev_m").click(function(){var t=r,e=c;1==e&&(r=t-1,c="12"),e>1&&e<11&&(c="0"+(e-1)),e>10&&e<13&&(c=e-1),$(".kui_today").text(r+"年"+c+"月"),i("left"),i("right")}),$("a.kui_next_m").click(function(){var t=c;t>0&&t<9&&(c="0"+(parseInt(t,10)+1)),t>8&&t<12&&(c=parseInt(t,10)+1),12==t&&(r++,c="01"),$(".kui_today").text(r+"年"+c+"月"),i("left"),i("right")}),i("left"),i("right"),$(".kui_clean_btn").click(function(){e.val("")}),$(".kui_close_btn").click(function(){$("#kui_d_pane").hide()})}t={isDisabled:t.isDisabled||"0",maxDate:t.maxDate||"",minDate:t.minDate||"",className:t.className};var e;$.fn.jquery.replace(/\./g,"")>="191"?$(this).on("click focus",function(t){$("#popup_frame,#popup_pane,#a_tips_frame,#air_down_tips").hide(),e=$(this),i(),t.stopPropagation()}):$(this).live("click focus",function(t){$("#popup_frame,#popup_pane,#a_tips_frame,#air_down_tips").hide(),e=$(this),i(),t.stopPropagation()}),$(".kui_date_reset span.off").click(function(){jqObj[0].val(""),$("#kui_d_pane").hide()}),$(".kui_date_reset span.close").click(function(){$("#kui_d_pane").hide()})},$(function(){$(document).click(function(t){var i=$(t.target).closest(".kui_data_content_pane"),e=$(t.target).attr("t_id");"kui_date"==e||"undefined"==typeof i[0]&&$("#kui_d_pane").hide()})}),$(function(){var t='<div class="kui_d_pane" id="kui_d_pane" style="display:none;"><iframe id="kui_frame_d" width="370" height="203" frameborder="0"></iframe></iframe><div class="kui_data_content_pane"><div class="kui_prev_next_month"><a href="javascript:;" class="kui_prev_m"></a><span class="kui_today"></span><a href="javascript:;" class="kui_next_m"></a><span class="kui_tomorrow"></span></div><div id="left_table"><dl class="kui_data_tab"><dt class="d_th_bg">日</dt><dt>一</dt><dt>二</dt><dt>三</dt><dt>四</dt><dt>五</dt><dt class="d_th_bg">六</dt></dl><dl class="kui_date_info" id="kui_left_t"></dl></div><div id="right_table"><dl class="kui_data_tab"><dt class="d_th_bg">日</dt><dt>一</dt><dt>二</dt><dt>三</dt><dt>四</dt><dt>五</dt><dt class="d_th_bg">六</dt></dl><dl class="kui_date_info" id="kui_right_t"></dl></div><div class="kui_date_reset"><span class="off">清空</span><span class="close">关闭</span></div></div></div>';$("body").append(t)});